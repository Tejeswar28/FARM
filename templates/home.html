{% extends 'base.html' %}
{% block content %}
<!-- Animated Background with Particles -->
<div id="particles-js" class="particles-container"></div>

<!-- Hero Section -->
<section class="hero animate__animated animate__fadeIn" style="background: url('https://images.unsplash.com/photo-1506744038136-46273834b3fb?auto=format&fit=crop&w=1200&q=80') center/cover no-repeat; display: flex; align-items: center; justify-content: center; position: relative;">
    <div class="hero-content animate__animated">
        <div class="hero-logo-container">
            <!-- Custom SVG Logo for Hero -->
            <svg class="hero-farm-logo" width="70" height="70" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                <defs>
                    <linearGradient id="hero-logo-gradient" x1="0%" y1="0%" x2="100%" y2="100%">
                        <stop offset="0%" stop-color="#2e8b57" />
                        <stop offset="50%" stop-color="#1c6e41" />
                        <stop offset="100%" stop-color="#154c2d" />
                    </linearGradient>
                    <filter id="glow" x="-50%" y="-50%" width="200%" height="200%">
                        <feGaussianBlur stdDeviation="5" result="blur"/>
                        <feComposite in="SourceGraphic" in2="blur" operator="over"/>
                    </filter>
                </defs>
                <!-- Main Circle -->
                <circle cx="256" cy="256" r="200" fill="url(#hero-logo-gradient)" />
                <!-- Wheat/Plant Symbolism -->
                <g fill="#ffd700" transform="translate(256 256) scale(0.65) translate(-256 -256)" filter="url(#glow)">
                    <path d="M256,100 C270,150 300,180 340,190 C300,200 270,230 256,280 C242,230 212,200 172,190 C212,180 242,150 256,100 Z" />
                    <path d="M256,100 C256,150 270,180 290,200 C270,220 256,250 256,300 C256,250 242,220 222,200 C242,180 256,150 256,100 Z" transform="rotate(45 256 200)" />
                    <path d="M256,100 C256,150 270,180 290,200 C270,220 256,250 256,300 C256,250 242,220 222,200 C242,180 256,150 256,100 Z" transform="rotate(90 256 200)" />
                    <path d="M256,100 C256,150 270,180 290,200 C270,220 256,250 256,300 C256,250 242,220 222,200 C242,180 256,150 256,100 Z" transform="rotate(135 256 200)" />
                </g>
                <!-- Sheep Silhouette -->
                <g filter="url(#glow)">
                    <path d="M350,320 C380,310 400,330 390,360 C380,390 350,385 340,360 Z" fill="white" />
                    <path d="M330,340 C350,330 365,340 375,360 C365,380 330,390 310,360 C310,340 320,345 330,340 Z" fill="white" />
                    <path d="M280,350 C300,330 330,340 340,370 C330,400 290,400 270,380 C260,350 270,360 280,350 Z" fill="white" />
                </g>
            </svg>
        </div>
        <h1 class="animate__animated animate__fadeInDown farm-name-hero">Welcome to Shuddhi Farms</h1>
        <p class="animate__animated animate__fadeInUp animate__delay-1s">Raising healthy, happy sheep with care and integrity. Experience the best in sustainable farming and quality livestock.</p>
        <a href="#about" class="cta-btn animate__animated animate__pulse animate__infinite">Explore Our Farm</a>
    </div>
</section>

<!-- Network Status Indicator -->
<div id="networkStatus" class="network-status">
    <div class="network-status-icon">
        <i class="fas fa-wifi"></i>
    </div>
    <span class="network-status-text">Connected</span>
</div>

<!-- About Section -->
<section id="about" class="about-section animate__animated animate__fadeIn">    <div class="section-container">        <div style="display: flex; align-items: center; justify-content: center; margin-bottom: 1.5rem;">
            <!-- Mini logo next to section title -->
            <svg class="section-logo" width="40" height="40" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="margin-right: 15px;">
                <circle cx="256" cy="256" r="200" fill="#2e8b57" />
                <g fill="#ffd700" transform="translate(256 256) scale(0.65) translate(-256 -256)">
                    <path d="M256,100 C270,150 300,180 340,190 C300,200 270,230 256,280 C242,230 212,200 172,190 C212,180 242,150 256,100 Z" />
                </g>
            </svg>
            <h2 class="section-title">About Shuddhi Farms</h2>
        </div>
        <div class="about-content">
            <div class="about-text">
                <p>Shuddhi Farms is a partnership of four passionate farmers—Tejes, Thahir, Dheeraj, and Raghava—dedicated to raising sheep in a sustainable, ethical, and innovative way. Our farm is committed to animal welfare, environmental stewardship, and providing the highest quality sheep for your needs.</p>
                <p>Whether you're looking for livestock, wool, or simply want to learn more about sheep farming, we welcome you to our community.</p>
            </div>
            <div class="about-image">
                <img src="https://th.bing.com/th/id/OIP.eeycY4xT8k9XfgHxa7tUyQHaEK?w=312&h=180&c=7&r=0&o=7&dpr=1.5&pid=1.7&rm=3" alt="Sheep farm" class="animate__animated animate__fadeInRight">
            </div>
        </div>
    </div>
</section>

<!-- Gallery Preview Section -->
<section class="gallery-preview-section animate__animated animate__fadeIn">
    <div class="section-container">
        <h2 class="section-title">Photo Gallery</h2>        <div class="swiper gallery-swiper">
            <div class="swiper-wrapper">
                {% for image in images %}
                    {% if image.file %}
                    <div class="swiper-slide">
                        <div class="gallery-card">
                            <img src="{{ image.file.url }}" alt="{{ image.title }}" />
                            <div class="gallery-card-content">
                                <h3>{{ image.title }}</h3>
                                <p>{{ image.description|truncatechars:100 }}</p>
                            </div>
                        </div>
                    </div>
                    {% endif %}
                {% empty %}
                    <div class="swiper-slide"><img src="https://images.unsplash.com/photo-1464983953574-0892a716854b?auto=format&fit=crop&w=800&q=80" alt="Sheep 1" /></div>
                    <div class="swiper-slide"><img src="https://images.unsplash.com/photo-1500534314209-a25ddb2bd429?auto=format&fit=crop&w=800&q=80" alt="Sheep 2" /></div>
                    <div class="swiper-slide"><img src="https://images.unsplash.com/photo-1518717758536-85ae29035b6d?auto=format&fit=crop&w=800&q=80" alt="Sheep 3" /></div>
                {% endfor %}
                
                {% if images|length == 1 %}
                    {% for image in images %}
                        {% if image.file %}
                        <div class="swiper-slide">
                            <div class="gallery-card">
                                <img src="{{ image.file.url }}" alt="{{ image.title }}" />
                                <div class="gallery-card-content">
                                    <h3>{{ image.title }}</h3>
                                    <p>{{ image.description|truncatechars:100 }}</p>
                                </div>
                            </div>
                        </div>
                        {% endif %}
                    {% endfor %}
                    {% for image in images %}
                        {% if image.file %}
                        <div class="swiper-slide">
                            <div class="gallery-card">
                                <img src="{{ image.file.url }}" alt="{{ image.title }}" />
                                <div class="gallery-card-content">
                                    <h3>{{ image.title }}</h3>
                                    <p>{{ image.description|truncatechars:100 }}</p>
                                </div>
                            </div>
                        </div>
                        {% endif %}
                    {% endfor %}
                {% endif %}
                
                {% if images|length == 2 %}
                    {% for image in images %}
                        {% if image.file %}
                        <div class="swiper-slide">
                            <div class="gallery-card">
                                <img src="{{ image.file.url }}" alt="{{ image.title }}" />
                                <div class="gallery-card-content">
                                    <h3>{{ image.title }}</h3>
                                    <p>{{ image.description|truncatechars:100 }}</p>
                                </div>
                            </div>
                        </div>
                        {% endif %}
                    {% endfor %}
                {% endif %}
            </div>
            <div class="swiper-pagination"></div>
            <div class="swiper-button-prev"></div>
            <div class="swiper-button-next"></div>
        </div>
        <div class="cta-container">
            <a href="/gallery/" class="cta-btn animate__animated animate__pulse animate__infinite">See More Photos</a>
        </div>
    </div>
</section>

<!-- Video Preview Section -->
{% if show_video_form %}
<section class="video-section animate__animated animate__fadeIn">
    <div class="section-container">        <h2 class="section-title">Farm Videos</h2>
        <!-- Quick YouTube Video Add Form (Admin Only) -->
        <div class="quick-add-video-container">
            <form id="quickAddVideoForm" class="quick-add-video-form">
                <div class="form-group">
                    <input type="text" id="youtubeUrl" class="form-control" placeholder="Paste YouTube URL here" required>
                    <input type="text" id="videoTitle" class="form-control" placeholder="Video title" required>                    <textarea id="videoDescription" class="form-control" placeholder="Short description" rows="2"></textarea>
                    <button type="submit" class="btn-add-video" id="addVideoBtn">
                        <span class="btn-text">Add Video</span>
                        <span class="btn-loading" style="display: none;">
                            <i class="fas fa-spinner fa-spin"></i>
                        </span>
                    </button>
                </div>
                <div class="loading-indicator" id="videoUrlLoading">
                    <div class="loading-spinner"></div>
                    <span class="loading-text">Checking URL...</span>
                </div>
                <div id="videoPreview" class="video-preview-container"></div>
            </form>
            <p class="form-info">Simply paste a YouTube URL to add it to the gallery</p>
        </div>
        
        <!-- Random YouTube Video Suggestions -->
        <div class="random-videos-container">
            <h3>Try these example videos:</h3>
            <div class="random-video-links">
                <button class="random-video-btn" data-url="https://www.youtube.com/watch?v=TqaXfyYYp8s" data-title="Sheep Herding Dogs">Sheep Herding Dogs</button>
                <button class="random-video-btn" data-url="https://www.youtube.com/watch?v=dNVZ0ZPfE8s" data-title="Feeding Time">Feeding Time</button>
                <button class="random-video-btn" data-url="https://www.youtube.com/watch?v=GOGpTfz2_nA" data-title="Sheep Farm Tour">Sheep Farm Tour</button>
            </div>
        </div>
        
        <div class="swiper video-swiper">
            <div class="swiper-wrapper">
                {% for video in videos %}
                    {% if video.video_url %}
                    <div class="swiper-slide">
                        <div class="video-card">
                            <div class="video-wrapper">
                                <iframe src="{{ video.video_url }}" title="{{ video.title }}" frameborder="0" allowfullscreen></iframe>
                            </div>
                            <div class="video-info">
                                <h3>{{ video.title }}</h3>
                                <p>{{ video.description|truncatechars:100 }}</p>
                            </div>
                        </div>
                    </div>
                    {% endif %}
                {% empty %}
                    <div class="swiper-slide">
                        <div class="video-card">
                            <div class="video-wrapper">
                                <iframe src="https://www.youtube.com/embed/Ujyo1sgituQ" title="Sheep Farm Story" frameborder="0" allowfullscreen></iframe>
                            </div>
                            <div class="video-info">
                                <h3>Our Farm Story</h3>
                                <p>Learn about how our farm began and what makes it special.</p>
                            </div>
                        </div>
                    </div>
                    <div class="swiper-slide">
                        <div class="video-card">
                            <div class="video-wrapper">
                                <iframe src="https://www.youtube.com/embed/SD7JIkBWsqw" title="Grazing is Good" frameborder="0" allowfullscreen></iframe>
                            </div>
                            <div class="video-info">
                                <h3>Grazing is Good</h3>
                                <p>See our sustainable grazing practices that keep our sheep healthy.</p>
                            </div>
                        </div>
                    </div>
                    <div class="swiper-slide">
                        <div class="video-card">
                            <div class="video-wrapper">
                                <iframe src="https://www.youtube.com/embed/QslJYDX3o8I" title="Sheep Shearing" frameborder="0" allowfullscreen></iframe>
                            </div>
                            <div class="video-info">
                                <h3>Sheep Shearing</h3>
                                <p>Watch our annual sheep shearing process.</p>
                            </div>
                        </div>
                    </div>
                {% endfor %}

                {% if videos|length == 1 %}
                    {% for video in videos %}
                        {% if video.video_url %}
                        <div class="swiper-slide">
                            <div class="video-card">
                                <div class="video-wrapper">
                                    <iframe src="{{ video.video_url }}" title="{{ video.title }}" frameborder="0" allowfullscreen></iframe>
                                </div>
                                <div class="video-info">
                                    <h3>{{ video.title }}</h3>
                                    <p>{{ video.description|truncatechars:100 }}</p>
                                </div>
                            </div>
                        </div>
                        {% endif %}
                    {% endfor %}
                    {% for video in videos %}
                        {% if video.video_url %}
                        <div class="swiper-slide">
                            <div class="video-card">
                                <div class="video-wrapper">
                                    <iframe src="{{ video.video_url }}" title="{{ video.title }}" frameborder="0" allowfullscreen></iframe>
                                </div>
                                <div class="video-info">
                                    <h3>{{ video.title }}</h3>
                                    <p>{{ video.description|truncatechars:100 }}</p>
                                </div>
                            </div>
                        </div>
                        {% endif %}
                    {% endfor %}
                {% endif %}
                
                {% if videos|length == 2 %}
                    {% for video in videos %}
                        {% if video.video_url %}
                        <div class="swiper-slide">
                            <div class="video-card">
                                <div class="video-wrapper">
                                    <iframe src="{{ video.video_url }}" title="{{ video.title }}" frameborder="0" allowfullscreen></iframe>
                                </div>
                                <div class="video-info">
                                    <h3>{{ video.title }}</h3>
                                    <p>{{ video.description|truncatechars:100 }}</p>
                                </div>
                            </div>
                        </div>
                        {% endif %}
                    {% endfor %}
                {% endif %}
            </div>
            <div class="swiper-pagination"></div>
            <div class="swiper-button-prev"></div>
            <div class="swiper-button-next"></div>
        </div>          <div class="cta-container">
            <a href="/gallery/" class="cta-btn animate__animated animate__pulse animate__infinite">See More Videos</a>
        </div>
        
          <!-- Video Suggestion Form (Admin Only) -->
        <div class="video-suggestion-container">
            <h3>Suggest a Video</h3>
            <p>Found a great sheep farming video? Share it with us!</p>
            <form id="suggestVideoForm" class="suggest-video-form">
                <div class="suggestion-form-group">
                    <input type="text" id="suggestYoutubeUrl" class="form-control" placeholder="YouTube URL" required>
                    <input type="text" id="suggestName" class="form-control" placeholder="Your Name (optional)">
                    <input type="email" id="suggestEmail" class="form-control" placeholder="Your Email (optional)">                    <button type="submit" class="btn-suggest-video" id="suggestVideoBtn">
                        <span class="btn-text">Suggest Video</span>
                        <span class="btn-loading" style="display: none;">
                            <i class="fas fa-spinner fa-spin"></i>
                        </span>
                    </button>
                </div>
                <div class="loading-indicator" id="suggestUrlLoading">
                    <div class="loading-spinner"></div>
                    <span class="loading-text">Checking URL...</span>
                </div>
                <div id="suggestPreview" class="video-preview-container"></div>
            </form>
            <div id="offlineMessage" class="offline-message" style="display: none;">
                <p><i class="fas fa-exclamation-triangle"></i> You appear to be offline. Your suggestion will be saved and sent when you're back online.</p>
            </div>        </div>
    </div>
</section>
{% endif %}

<!-- Call to Action Section -->
<section class="cta-section animate__animated animate__fadeIn">
    <div class="cta-overlay"></div>
    <div class="cta-content">
        <h2 class="animate__animated animate__fadeInDown">Book Your Sheep or Visit Us!</h2>
        <p class="animate__animated animate__fadeInUp">Ready to order sheep or want to see our farm? Click below to get started.</p>
        <div class="cta-buttons">
            <a href="/orders/book/" class="cta-btn primary-btn animate__animated animate__pulse animate__infinite">Order Sheep</a>
            <a href="tel:+919999999999" class="cta-btn secondary-btn">Call Us</a>
        </div>
    </div>
</section>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Initialize homepage gallery Swiper
    setTimeout(() => {
        var gallerySwiper = new Swiper('.gallery-swiper', {
            slidesPerView: 1,
            spaceBetween: 20,
            loop: false,
            pagination: {
                el: '.swiper-pagination',
                clickable: true,
            },
            navigation: {
                nextEl: '.swiper-button-next',
                prevEl: '.swiper-button-prev',
            },
            autoplay: {
                delay: 3000,
                disableOnInteraction: false,
            },
            effect: 'fade',
            fadeEffect: {
                crossFade: true
            },
            preloadImages: true,
            updateOnImagesReady: true,
        });
        
        console.log('Home page swiper initialized');
    }, 500);

    // Initialize particles.js for animated background
    if (typeof particlesJS !== 'undefined') {
        particlesJS('particles-js', {
            particles: {
                number: { value: 80, density: { enable: true, value_area: 800 } },
                color: { value: '#2e8b57' },
                shape: { type: 'circle' },
                opacity: { value: 0.5, random: false },
                size: { value: 3, random: true },
                line_linked: {
                    enable: true,
                    distance: 150,
                    color: '#2e8b57',
                    opacity: 0.4,
                    width: 1
                },
                move: {
                    enable: true,
                    speed: 2,
                    direction: 'none',
                    random: false,
                    straight: false,
                    out_mode: 'out',
                    bounce: false
                }
            },
            interactivity: {
                detect_on: 'canvas',
                events: {
                    onhover: { enable: true, mode: 'repulse' },
                    onclick: { enable: true, mode: 'push' },
                    resize: true
                }
            },
            retina_detect: true
        });
    }
});
</script>

<style>
    /* Animated Background */
    .particles-container {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: -1;
        background-color: var(--secondary-color);
    }

    /* Hero Section */
    .hero {
        position: relative;
        overflow: hidden;
        background-attachment: fixed;
        margin-top: -2rem;
    }

    .hero:before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0,0,0,0.4);
        z-index: 1;
    }

    .hero-content {
        position: relative;
        z-index: 2;
        text-align: center;
        padding: 4rem 2rem;
        background: rgba(46,139,87,0.8);
        border-radius: var(--border-radius);
        box-shadow: var(--box-shadow);
        max-width: 800px;
        margin: 0 auto;
    }

    .hero h1 {
        color: white;
        font-size: 2.5rem;
        margin-bottom: 1rem;
    }

    .hero p {
        color: white;
        font-size: 1.2rem;
        margin-bottom: 2rem;
    }

    /* Section Styling */
    .section-container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 2rem;
    }

    .section-title {
        text-align: center;
        color: var(--primary-color);
        margin-bottom: 2rem;
        font-size: 2rem;
        position: relative;
    }

    .section-title:after {
        content: '';
        position: absolute;
        width: 80px;
        height: 4px;
        background: var(--accent-color);
        bottom: -10px;
        left: 50%;
        transform: translateX(-50%);
    }

    /* About Section */
    .about-section {
        padding: 4rem 0;
        background: white;
    }

    .about-content {
        display: flex;
        flex-wrap: wrap;
        align-items: center;
        gap: 2rem;
    }

    .about-text {
        flex: 1;
        min-width: 300px;
    }

    .about-image {
        flex: 1;
        min-width: 300px;
    }

    .about-image img {
        width: 100%;
        border-radius: var(--border-radius);
        box-shadow: var(--box-shadow);
    }

    /* Gallery Preview */
    .gallery-preview-section {
        padding: 4rem 0;
        background: var(--secondary-color);
    }

    .gallery-card {
        position: relative;
        overflow: hidden;
        border-radius: var(--border-radius);
        box-shadow: var(--box-shadow);
    }

    .gallery-card img {
        width: 100%;
        height: 300px;
        object-fit: cover;
        transition: transform 0.5s ease;
    }

    .gallery-card:hover img {
        transform: scale(1.05);
    }

    .gallery-card-content {
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        background: rgba(0,0,0,0.7);
        color: white;
        padding: 1rem;
        transform: translateY(100%);
        transition: transform 0.3s ease;
    }

    .gallery-card:hover .gallery-card-content {
        transform: translateY(0);
    }

    /* Video Section */
    .video-section {
        padding: 4rem 0;
        background: white;
    }

    .video-container {
        display: flex;
        flex-wrap: wrap;
        gap: 2rem;
        justify-content: center;
    }

    .video-card {
        flex: 1;
        min-width: 300px;
        max-width: 500px;
        box-shadow: var(--box-shadow);
        border-radius: var(--border-radius);
        overflow: hidden;
        transition: transform 0.3s ease;
    }

    .video-card:hover {
        transform: translateY(-10px);
    }

    .video-wrapper {
        position: relative;
        padding-bottom: 56.25%; /* 16:9 aspect ratio */
        height: 0;
        overflow: hidden;
    }

    .video-wrapper iframe {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
    }

    .video-info {
        padding: 1rem;
        background: var(--primary-color);
        color: white;
    }

    .video-info h3 {
        margin-top: 0;
    }

    /* CTA Section */
    .cta-section {
        position: relative;
        padding: 6rem 0;
        background: url('https://images.unsplash.com/photo-1511117833895-4b473c0b85d6?auto=format&fit=crop&w=1200&q=80') center/cover no-repeat;
        text-align: center;
        color: white;
    }

    .cta-overlay {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(46,139,87,0.8);
    }

    .cta-content {
        position: relative;
        z-index: 2;
        max-width: 800px;
        margin: 0 auto;
        padding: 0 2rem;
    }

    .cta-buttons {
        display: flex;
        justify-content: center;
        gap: 1rem;
        margin-top: 2rem;
        flex-wrap: wrap;
    }

    .cta-btn {
        display: inline-block;
        padding: 0.8rem 1.5rem;
        background: var(--primary-color);
        color: white;
        text-decoration: none;
        border-radius: 50px;
        font-weight: bold;
        transition: all 0.3s ease;
        border: 2px solid transparent;
    }

    .cta-btn:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 15px rgba(0,0,0,0.1);
    }

    .primary-btn {
        background: var(--accent-color);
        color: var(--primary-color);
    }

    .secondary-btn {
        background: transparent;
        border: 2px solid white;
    }

    .secondary-btn:hover {
        background: white;
        color: var(--primary-color);
    }

    .cta-container {
        text-align: center;
        margin-top: 2rem;
    }

    @media (max-width: 768px) {
        .about-content,
        .video-container {
            flex-direction: column;
        }
    }
</style>
{% endblock %}
